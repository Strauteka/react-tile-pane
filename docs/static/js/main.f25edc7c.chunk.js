(this["webpackJsonpreact-tile-pane"]=this["webpackJsonpreact-tile-pane"]||[]).push([[0],{20:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(0),o=n.n(r),c=n(11),a=n.n(c),s=(n(20),n(3)),h=(n(14),n(2)),l=n(7),u=function(e){var t=e.calcLayout,n=e.pane,r=e.currentIndex,o=e.leaves;return Object(i.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"space-around"},children:o.map((function(e,c){return Object(i.jsxs)("div",{style:{display:"flex"},children:[Object(i.jsx)(ie,{id:o[c].id,children:Object(i.jsx)("div",{onClick:function(){n.onTab=c,t()},style:{color:r===c?"#000":"#999",background:"#d1f0b5"},children:e.id})}),Object(i.jsx)("div",{onClick:function(){console.log(n),console.log(c),n.removeTab(c),t()},children:"off"})]},e.id)}))})},d=Object(r.createContext)(u),f={tabsBarPosition:"top",stretchBarThickness:8},b=Object(r.createContext)(f),v=Object(r.createContext)([]),p={left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0},j=Object(r.createContext)((function(){return null})),O=Object(r.createContext)(p),g=Object(r.createContext)((function(){})),x=n(12),w=n(5);function m(){var e=this.children,t=this.parent,n=this.indexInParent;if(t&&n&&!F(t.children)&&!F(e)&&1===e.length){var i=e[0];this.children=i.children}}function C(){var e=this.children;if(!F(e)){var t=T(e);e.forEach((function(e,n){e.grow=t[n],e.indexInParent=n}))}}function P(e){var t=this.children;if(!F(t)){var n=M(this,t.map((function(e){return e.grow})));t.forEach((function(t,i){(function(t){return!e||e.includes(t)})(t)&&(t.position=n[i],t.reCalcChildrenPosition())}))}}function y(){var e=this.parent;e&&void 0!==this.indexInParent&&(F(e.children)||(e.children.splice(this.indexInParent,1),e.takeOverChild(),e.reCalcChildGrow(),e.reCalcChildrenPosition()))}function T(e){var t=e.map((function(e){var t;return null!==(t=e.grow)&&void 0!==t?t:1})),n=t.reduce((function(e,t){return e+t}),0);return t.map((function(e){return e/n}))}function M(e,t){var n=e.isRow,i=e.position,r=i.top,o=i.left,c=i.width,a=i.height;if(n){var s=t.reduce((function(e,n,i){return i>0&&e.push(e[i-1]+c*t[i-1]),e}),[o]);return t.map((function(e,t){return{top:r,height:a,width:e*c,left:s[t]}}))}var h=t.reduce((function(e,n,i){return i>0&&e.push(e[i-1]+a*t[i-1]),e}),[r]);return t.map((function(e,t){return{left:o,width:c,height:e*a,top:h[t]}}))}function B(e){var t=this.children;if(F(t)){var n=t.slice();n.splice(e,1),0!==n.length?this.children=n:this.removeSelf()}}function I(e){if(F(this.children)&&!this.movingTabs.includes(e)){var t,n,i=this.movingTabs.slice();if(i.push(e),this.movingTabs=i,this.movingTabs.length===this.children.length)this.grow=0,null===(t=this.parent)||void 0===t||t.reCalcChildGrow(),null===(n=this.parent)||void 0===n||n.reCalcChildrenPosition()}}function R(e){var t=this.children;if(F(t)){var n=t.findIndex((function(t){return t===e})),i=this.movingTabs.findIndex((function(t){return t===e})),r=this.movingTabs.slice();r.splice(i,1);var o=t.slice();o.splice(n,1),this.movingTabs=r,this.children=o,0===this.grow&&this.removeSelf()}}function k(e,t){var n=this,i=this.children,r=this.indexInParent,o=void 0===r?0:r,c=this.parent,a=this.onTab,s=this.isRow;if("center"===t){if(!F(i))return;var h=i.slice();return h.push(e),this.children=h,void(this.onTab=h.length-1)}var l=["right","bottom"].includes(t);(function(e,t,n){var i;return!!t&&((null===(i=e.parent)||void 0===i?void 0:i.isRow)?["left","right"]:["top","bottom"]).includes(n)})(this,F(i),t)?function(t){if(c){var i=n.grow/2;n.grow=i;var r=new D({grow:i,children:[e],parent:c}),a=t?o+1:o;c.children.splice(a,0,r),c.reCalcChildGrow(),c.reCalcChildrenPosition()}}(l):function(r){var o=new D({isRow:s,grow:.5,children:i,onTab:a,parent:n}),c=new D({grow:.5,children:[e],parent:n}),h=r?[o,c]:[c,o];n.children=h,n.isRow=["left","right"].includes(t),n.reCalcChildGrow(),n.reCalcChildrenPosition()}(l)}function L(e){var t=[e],n=[];return function e(i){var r=i.children;!F(r)&&r.forEach((function(o,c){e(o),t.push(o);var a=r[c-1];if(a){var s=new A(i,a,o);n.push(s)}}))}(e),{panes:t,stretchBars:n}}var S=n(9),N=.05,E=.3;function G(e,t){var n=Object(s.a)(t,2),i=n[0],r=n[1],o=e.left,c=e.top,a=e.width,h=e.height;return o<i&&i<o+a&&c<r&&r<c+h}var D=function e(t){Object(w.a)(this,e),this.args=t,this.isRow=void 0,this.onTab=void 0,this.grow=1,this.parent=void 0,this.indexInParent=void 0,this.position={top:0,left:0,width:1,height:1},this.children=void 0,this.isTitlePane=!0,this.id=void 0,this.movingTabs=[],this.reCalcChildrenPosition=P,this.reCalcChildGrow=C,this.removeSelf=y,this.removeTab=B,this.takeOverChild=m,this.insertLeaf=k,this.startMovingTab=I,this.endMovingTab=R,Object.assign(this,t);var n=t.children;if(n instanceof Array)if(F(n))this.children=n;else{var i=function(e,t){var n=T(t);return M(e,n).map((function(i,r){return Object(h.a)(Object(h.a)({},t[r]),{},{position:i,parent:e,indexInParent:r,grow:n[r],renderReactComponent:e.reCalcChildrenPosition})}))}(this,n).map((function(t){return new e(t)}));this.children=i}else this.children=[n];this.id=Math.random().toString()};function F(e){return!(e[0]instanceof Object)}function z(e){var t=e/(this.parentPane.isRow?this.parentPane.position.width:this.parentPane.position.height),n=this.previousPane.grow+t,i=this.nextPane.grow-t,r=function(e,t){if(e<.04||t<.04)return!1;var n=e+t;return!(e>n||t>n)}(n,i);return r&&(this.previousPane.grow=n,this.nextPane.grow=i,this.parentPane.reCalcChildrenPosition([this.previousPane,this.nextPane])),r}var A=function e(t,n,i){Object(w.a)(this,e),this.parentPane=t,this.previousPane=n,this.nextPane=i,this.position=this.nextPane.position,this.move=z};function J(e){return null!==e&&void 0!==e}var W=Object(r.createContext)({panes:[],stretchBars:[],paneLeaves:[]}),q=function(e){var t=e.rootPane,n=e.children,o=e.tileLeaves,c=e.tabsBar,a=void 0===c?u:c,h=e.option,l=void 0===h?f:h,p=function(e){var t=Object(r.useRef)(new D(e)),n=Object(r.useState)(L(t.current)),i=Object(s.a)(n,2),o=i[0],c=o.panes,a=o.stretchBars,h=i[1],l=Object(r.useCallback)((function(){h(L(t.current))}),[]);return{panes:c,stretchBars:a,rootPaneEntityRef:t,reCalcLayout:l}}(t),w=p.panes,m=p.stretchBars,C=p.reCalcLayout,P=Object(r.useMemo)((function(){return w.filter((function(e){return F(e.children)}))}),[w]),y=Object(x.a)({scroll:!0}),T=Object(s.a)(y,2),M=T[0],B=T[1];return Object(i.jsx)(W.Provider,{value:{panes:w,stretchBars:m,paneLeaves:P},children:Object(i.jsx)(j.Provider,{value:M,children:Object(i.jsx)(O.Provider,{value:B,children:Object(i.jsx)(g.Provider,{value:C,children:Object(i.jsx)(v.Provider,{value:o,children:Object(i.jsx)(d.Provider,{value:a,children:Object(i.jsx)(b.Provider,{value:l,children:n})})})})})})})};function H(e,t,n){var i=e.top,r=e.left,o=e.width,c=e.height;return{top:n?100*i+"%":"calc(".concat(100*i,"% - ").concat(t/2,"px)"),left:n?"calc(".concat(100*r,"% - ").concat(t/2,"px)"):100*r+"%",width:n?t:100*o+"%",height:n?100*c+"%":t}}var K=function(e){var t=e.bar,n=Object(r.useContext)(O),o=Object(r.useContext)(g),c=Object(r.useContext)(b).stretchBarThickness,a=Object(r.useCallback)((function(e,i){var r=t.parentPane.isRow?e/n.width:i/n.height;t.move(r),o()}),[t,n.height,n.width,o]),u=Object(l.a)((function(e){var t=e.down,n=Object(s.a)(e.delta,2),i=n[0],r=n[1];t&&a(i,r)}),{enabled:!0}),d=t.nextPane.position,f=d.top,v=d.left,p=d.width,j=d.height,x=t.parentPane.isRow;return Object(r.useMemo)((function(){return Object(i.jsx)("div",Object(h.a)(Object(h.a)({},u()),{},{style:Object(h.a)({position:"absolute",background:"#8191ec66"},H({top:f,left:v,width:p,height:j},c,x))}))}),[u,j,x,v,c,f,p])},Q=o.a.memo(K);var U=function(e){var t=e.leaf,n=e.currentIndex===e.index;return Object(r.useMemo)((function(){return Object(i.jsx)("div",{style:{flexGrow:n?1:0,display:n?void 0:"none"},children:t.node})}),[n,t.node])},V=Object(r.memo)(U);function X(e){switch(e){case"top":return"column";case"bottom":return"column-reverse";case"left":return"row";case"right":return"row-reverse"}}var Y=function(e){var t=e.pane,n=Object(r.useContext)(v),o=Object(r.useContext)(d),c=Object(r.useContext)(b),a=c.stretchBarThickness,s=c.tabsBarPosition,l=Object(r.useMemo)((function(){return t.children.map((function(e){return n.find((function(t){return t.id===e}))})).filter(J)}),[t.children,n]),u=Object(r.useMemo)((function(){var e;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e<n?n:e>t?t:e}(null!==(e=t.onTab)&&void 0!==e?e:0,t.children.length-1)}),[t.children.length,t.onTab]),f=Object(r.useContext)(g),p=t.position,j=p.top,O=p.left,x=p.width,w=p.height;t.movingTabs.length&&console.log(t.movingTabs);var m=t.movingTabs;return Object(r.useMemo)((function(){return Object(i.jsxs)("div",{style:Object(h.a)({visibility:0===t.grow?"hidden":void 0,display:"flex",flexDirection:X(s),position:"absolute",boxSizing:"border-box",padding:a/2},(e={top:j,left:O,width:x,height:w},{top:100*e.top+"%",left:100*e.left+"%",width:100*e.width+"%",height:100*e.height+"%"})),children:[Object(i.jsx)(o,Object(h.a)({},{calcLayout:f,pane:t,leaves:l,currentIndex:u})),l.map((function(e,t){return!m.includes(e.id)&&Object(i.jsx)(V,Object(h.a)({},{leaf:e,currentIndex:u,index:t}),e.id)}))]});var e}),[s,a,j,O,x,w,o,f,t,l,u,m])},Z=function(e){var t=e.width,n=void 0===t?"100%":t,o=e.height,c=void 0===o?"100%":o,a=Object(r.useContext)(W),s=a.paneLeaves,l=a.stretchBars,u=Object(r.useContext)(j);return Object(r.useMemo)((function(){return Object(i.jsxs)("div",{ref:u,style:{position:"relative",width:n,height:c},children:[s.map((function(e){return Object(i.jsx)(Y,Object(h.a)({},{pane:e}),e.id)})),l.map((function(e,t){var n;return Object(i.jsx)(Q,{bar:e},null!==(n=e.nextPane.id)&&void 0!==n?n:t)}))]})}),[u,n,c,s,l])},$=Object(r.memo)(Z),_=function(e){var t=e.position,n=e.paneWithPreBoxRef,o=Object(r.useContext)(O),c=Object(r.useContext)(W).panes,a=Object(r.useMemo)((function(){return[(t[0]-o.left)/o.width,(t[1]-o.top)/o.height]}),[o,t]),l=Object(r.useMemo)((function(){return function(e,t){if(t){var n,i=Object(s.a)(t,2),r=i[0],o=i[1],c=e.filter((function(e){return!F(e.children)})),a=Object(S.a)(c);try{for(a.s();!(n=a.n()).done;){var h=n.value;if(G(h.position,t)){var l=h.position,u=l.left,d=l.top,f=l.width,b=l.height;if(h.isRow){if(o-d<b*N)return{pane:h,into:"top"};if(d+b-o<b*N)return{pane:h,into:"bottom"}}else{if(r-u<f*N)return{pane:h,into:"left"};if(u+f-r<f*N)return{pane:h,into:"right"}}}}}catch(P){a.e(P)}finally{a.f()}var v,p=e.filter((function(e){return F(e.children)})),j=Object(S.a)(p);try{for(j.s();!(v=j.n()).done;){var O=v.value;if(G(O.position,t)){var g=O.position,x=g.left,w=g.top,m=g.width,C=g.height;return r-x<m*E?{pane:O,into:"left"}:x+m-r<m*E?{pane:O,into:"right"}:o-w<C*E?{pane:O,into:"top"}:w+C-o<C*E?{pane:O,into:"bottom"}:{pane:O,into:"center"}}}}catch(P){j.e(P)}finally{j.f()}}}(c,a)}),[a,c]);return n.current=l,Object(r.useMemo)((function(){if(!l)return null;var e=function(e,t){var n=e.pane,i=e.into,r=n.position,o=r.top,c=r.left,a=r.width,s=r.height;switch(i){case"center":return{top:t.top+o*t.height,left:t.left+c*t.width,height:t.height*s,width:t.width*a};case"left":return{top:t.top+o*t.height,left:t.left+c*t.width,height:t.height*s,width:t.width*a*ee};case"right":return{top:t.top+o*t.height,left:t.left+c*t.width+t.width*a*.5,height:t.height*s,width:t.width*a*ee};case"top":return{top:t.top+o*t.height,left:t.left+c*t.width,height:t.height*s*ee,width:t.width*a};case"bottom":return{top:t.top+o*t.height+t.height*s*.5,left:t.left+c*t.width,height:t.height*s*ee,width:t.width*a}}}(l,o);return Object(i.jsx)("div",{style:Object(h.a)({zIndex:1,visibility:"visible",background:"#e4a4fd66",position:"fixed"},e)})}),[o,l])},ee=.5,te=Object(r.memo)(_);var ne=function(e){var t=e.id,n=e.children,o=Object(r.useRef)(),c=Object(r.useContext)(W).paneLeaves,a=Object(r.useContext)(g),u=Object(r.useMemo)((function(){return c.find((function(e){return e.children.includes(t)}))}),[t,c]),d=function(e,t,n,i){var o=Object(r.useState)(),c=Object(s.a)(o,2),a=c[0],h=c[1];return{bind:Object(l.b)({onDrag:function(e){var t=e.down,n=e.xy;h(t?n:void 0)},onDragStart:function(){console.log(t),n&&n.startMovingTab(t),i()},onDragEnd:function(){if(e.current){var r=e.current,o=r.pane,c=r.into;n&&n.endMovingTab(t),o.insertLeaf(t,c),i()}}},{drag:{threshold:10}}),position:a}}(o,t,u,a),f=d.position,b=d.bind,v=Object(r.useMemo)((function(){return f?{visibility:"visible",position:"fixed",top:f[1],left:f[0],transform:"translate(-50%,-50%)",zIndex:1}:{}}),[f]);return Object(r.useMemo)((function(){return Object(i.jsxs)(i.Fragment,{children:[f&&Object(i.jsx)(te,Object(h.a)({},{paneWithPreBoxRef:o,position:f})),Object(i.jsx)("div",Object(h.a)(Object(h.a)({},Object(h.a)(Object(h.a)({},b()),{},{style:v})),{},{style:v,children:n}))]})}),[b,n,f,v])},ie=Object(r.memo)(ne);n(22);function re(){var e=Object(r.useState)(1),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(i.jsxs)("div",{onClick:function(){return o((function(e){return e+1}))},className:"pane",children:[n," \u9897\u6768\u6885"]})}function oe(){return Object(i.jsx)("div",{className:"pane",children:"\u82f9\u679c"})}var ce=function(e){var t={},n=[];return Object.keys(e).forEach((function(i){t[i]=i,n.push({id:i,node:e[i]})})),[n,t]}({arbutus:Object(i.jsx)(re,{}),cherry:Object(i.jsx)("div",{className:"pane",children:"\u6a31\u6843"}),apple:Object(i.jsx)(oe,{}),banana:Object(i.jsx)("div",{className:"pane",children:"\u9999\u8549\ud83c\udf4c"}),lemon:Object(i.jsx)("div",{className:"pane",children:"\u67e0\u6aac"}),mango:Object(i.jsx)("div",{className:"pane",children:"\u8292\u679c"}),pomelo:Object(i.jsx)("div",{className:"pane",children:"\u67da\u5b50"})}),ae=Object(s.a)(ce,2),se=ae[0],he=ae[1],le={children:[{children:[he.apple,he.arbutus]},{isRow:!0,grow:2,children:[{children:he.cherry},{children:he.lemon},{children:[{children:he.mango,grow:3},{children:he.pomelo}]}]}]},ue=function(){return Object(i.jsxs)(q,{tileLeaves:se,rootPane:le,children:[Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("div",{style:{height:30}}),Object(i.jsx)("div",{className:"fence",children:Object(i.jsx)($,{})})]}),Object(i.jsx)(ie,{id:he.banana,children:"\u62d6\u52a8\u8fd9\u4e2a\ud83c\udf4c"})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),o(e),c(e)}))};a.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(ue,{})}),document.getElementById("root")),de()}},[[23,1,2]]]);
//# sourceMappingURL=main.f25edc7c.chunk.js.map